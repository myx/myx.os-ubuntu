#!/bin/sh

set -e

. /usr/local/share/myx.common/include/subr-universal.sh

InstallUserGroupMembership(){
	UserRequireRoot "InstallUserGroupMembership"

	local NAME="$1" GROUP="$2"

	test ! -z "$NAME" || ( echo "InstallUserGroupMembership: username is required!" ; exit 1 )
	if test -z "$GROUP" ; then
		echo "InstallUserGroupMembership: groupname is taken from username ($NAME)!"
		GROUP="$NAME"
	fi
	
	pwd_mkdb /etc/master.passwd

	pw groupshow "$GROUP" || pw groupadd -n "$GROUP"
	
	pw groupmod "$GROUP" -m "$NAME"

	pwd_mkdb /etc/master.passwd
}

case "$0" in
	*/myx.common/bin/lib/installUserGroupMembership) 
		InstallUserGroupMembership "$@"
	;;
esac
